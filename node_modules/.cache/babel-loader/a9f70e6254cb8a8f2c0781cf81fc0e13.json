{"ast":null,"code":"var _jsxFileName = \"/mnt/1E6AFBDE6AFBB09F/Informatique/MyWebProject/ClinicManagement/reactjs-login/src/components/App.js\";\nimport React, { Component } from \"react\";\nimport Dashboard from \"./Dashboard\";\nimport Home from \"./Home\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport axios from \"axios\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedInStatus: \"NOT_LOGGED_IN\",\n      logged_in: false,\n      user: {}\n    };\n    this.handleLogin = this.handleLogin.bind(this);\n  }\n\n  checkLoginStatus() {\n    axios.get(\"http://127.0.0.1:8000/api/logged_in\", {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(response => {\n      if (response.data.logged_in && this.state.loggedInStatus == \"NOT_LOGGED_IN\") {\n        this.setState({\n          loggedInStatus: \"LOGGED_IN\",\n          user: response.data.user\n        });\n      }\n\n      console.log(\"User logged In\", response);\n    }).catch(error => console.log(\"Check loggin error\", error));\n  }\n\n  componentDidMount() {\n    this.checkLoginStatus();\n  }\n\n  handleLogin(data) {\n    this.setState({\n      loggedInStatus: \"LOGGED_IN\",\n      logged_in: true,\n      user: data\n    });\n    console.log(\" handleLogin -->\" + data.token);\n    localStorage.setItem('token', data.token);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: props => /*#__PURE__*/React.createElement(Home, Object.assign({}, props, {\n        handleLogin: this.handleLogin,\n        loggedInStatus: this.state.loggedInStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 33\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/dashboard\",\n      render: props => /*#__PURE__*/React.createElement(Dashboard, Object.assign({}, props, {\n        loggedInStatus: this.state.loggedInStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 33\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }\n    }))));\n    /*return( \n        <Login/>\n    );*/\n\n    /*\n            return (\n                \n                  <div >\n                    <AppProvider>\n                      <AuthContainer />\n                    </AppProvider>\n                  </div>\n                \n              )\n      */\n\n    /*return(\n        <div>\n            <div className=\"ui fixed inverted menu\">\n                 <div className=\"ui container\">\n                     <a href=\"/#\" className=\"header item\">\n                         React JS CRUD with Laravel API\n                     </a>\n                 </div>\n                 \n            </div>\n            <div className=\"ui main container\">\n                 <MyForm customer={this.state.customer} onFormSubmit={this.onFormSubmit} /> \n                 {this.state.loader ? <Loader/> : \"\"}\n                 <CustomerList customers={this.state.customers} onDelete={this.onDelete} onEdit={this.onEdit}  />\n            </div>\n        </div>\n    );*/\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/mnt/1E6AFBDE6AFBB09F/Informatique/MyWebProject/ClinicManagement/reactjs-login/src/components/App.js"],"names":["React","Component","Dashboard","Home","BrowserRouter","Switch","Route","axios","App","constructor","state","loggedInStatus","logged_in","user","handleLogin","bind","checkLoginStatus","get","headers","Authorization","localStorage","getItem","then","response","data","setState","console","log","catch","error","componentDidMount","token","setItem","render","props"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\n\nimport Dashboard from \"./Dashboard\";\nimport Home from \"./Home\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\"\nimport axios from \"axios\";\n\nclass App extends Component{\n\n    constructor(){\n        super();\n        this.state={\n            loggedInStatus: \"NOT_LOGGED_IN\",\n            logged_in: false,\n            user: {}\n        }\n        this.handleLogin = this.handleLogin.bind(this);\n    }    \n\n    checkLoginStatus(){\n        axios.get(\"http://127.0.0.1:8000/api/logged_in\", {headers:{Authorization : `Bearer ${localStorage.getItem(\"token\")}`}})\n            .then(response=>{\n                if(response.data.logged_in && this.state.loggedInStatus == \"NOT_LOGGED_IN\"){\n                    this.setState({\n                        loggedInStatus: \"LOGGED_IN\",\n                        user:response.data.user\n                    });\n                }\n                console.log(\"User logged In\",response)\n                })\n            .catch(error=>\n                console.log(\"Check loggin error\",error)\n                );\n    }\n\n    componentDidMount(){\n        this.checkLoginStatus();\n    }\n\n    handleLogin(data){\n        this.setState({\n            loggedInStatus: \"LOGGED_IN\",\n            logged_in: true,\n            user:data\n        });\n        console.log(\" handleLogin -->\"+ data.token);\n        localStorage.setItem('token',data.token);\n\n    }\n\n    render(){\n         return(\n            <div className=\"app\">\n                <BrowserRouter>\n                    <Switch>\n                        <Route \n                            exact \n                            path={\"/\"}\n                            render={props=>(\n                                <Home {...props} handleLogin={this.handleLogin} loggedInStatus={this.state.loggedInStatus}/>\n                            )}\n                            /> \n                        <Route \n                            exact \n                            path={\"/dashboard\"} \n                            render={props=>(\n                                <Dashboard {...props} loggedInStatus={this.state.loggedInStatus}/>\n                            )}\n                            /> \n                    </Switch>\n                </BrowserRouter>\n            </div>\n        );\n\n        /*return( \n            <Login/>\n        );*/\n/*\n        return (\n            \n              <div >\n                <AppProvider>\n                  <AuthContainer />\n                </AppProvider>\n              </div>\n            \n          )\n  */      \n       /*return(\n           <div>\n               <div className=\"ui fixed inverted menu\">\n                    <div className=\"ui container\">\n                        <a href=\"/#\" className=\"header item\">\n                            React JS CRUD with Laravel API\n                        </a>\n                    </div>\n                    \n               </div>\n               <div className=\"ui main container\">\n                    <MyForm customer={this.state.customer} onFormSubmit={this.onFormSubmit} /> \n                    {this.state.loader ? <Loader/> : \"\"}\n                    <CustomerList customers={this.state.customers} onDelete={this.onDelete} onEdit={this.onEdit}  />\n               </div>\n           </div>\n       );*/\n    }\n}\n\nexport default App; \n"]},"metadata":{},"sourceType":"module"}